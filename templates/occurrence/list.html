{% extends "base.html" %}
{% load static %}

{% block title %}Ocorrências{% endblock title %}

{% block styles %}
<link href="{% static 'scss/occurrence/list.scss' %}" rel="stylesheet" type="text/x-scss" />
{% endblock styles %}

{% block content %}
{% with tab="occurrence" %}
{% include "navbar.html" %}
{% endwith %}

<main class="container-xl py-4">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h1 class="h4 mb-0">Ocorrências</h1>

    <!-- Create Button -->
    <a href="{% url 'occurrence-create' %}" class="btn btn-sm btn-primary">
      <span>Novo</span>
    </a>
  </div>


  <table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Descrição</th>
        <th scope="col text-nowrap">$ Total</th>
        <th scope="col text-nowrap">Tempo Parado</th>
        <th scope="col">Categoria</th>
        <th scope="col">Máquina</th>
        <th scope="col">Data</th>
      </tr>
    </thead>

    <tbody>
      {% for occurrence in occurrences %}
      <tr>
        <th scope="row">{{ occurrence.id }}</th>
        <td>{{ occurrence.description }}</td>
        <td>{{ occurrence.total_cost }}</td>
        <td>{{ occurrence.downtime }}</td>
        <td class="text-nowrap">{{ occurrence.category_label }}</td>
        <td class="text-nowrap">{{ occurrence.machine.name }}</td>
        <td class="text-nowrap">{{ occurrence.datetime }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</main>

{% endblock content %}